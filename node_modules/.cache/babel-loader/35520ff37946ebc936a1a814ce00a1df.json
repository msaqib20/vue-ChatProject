{"remainingRequest":"/Users/msaqib/vue-ChatProject/node_modules/babel-loader/lib/index.js!/Users/msaqib/vue-ChatProject/src/DataSource.js","dependencies":[{"path":"/Users/msaqib/vue-ChatProject/src/DataSource.js","mtime":1626831721417},{"path":"/Users/msaqib/vue-ChatProject/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/msaqib/vue-ChatProject/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21zYXFpYi92dWUtQ2hhdFByb2plY3Qvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL21zYXFpYi92dWUtQ2hhdFByb2plY3Qvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZXZlcnNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UvYXBwIjsKaW1wb3J0ICJmaXJlYmFzZS9hdXRoIjsKaW1wb3J0ICJmaXJlYmFzZS9maXJlc3RvcmUiOwppbXBvcnQgRmlsdGVyIGZyb20gImJhZC13b3JkcyI7CmltcG9ydCB7IHJlZiwgb25Vbm1vdW50ZWQsIGNvbXB1dGVkIH0gZnJvbSAidnVlIjsKZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcCh7CiAgYXBpS2V5OiAiQUl6YVN5QjAyMGFaVUZqejFXdU12cGdVVUZWWlpndDJSRnpJMUxjIiwKICBhdXRoRG9tYWluOiAidGVzdC1wcm9qZWN0LThhZjRkLmZpcmViYXNlYXBwLmNvbSIsCiAgcHJvamVjdElkOiAidGVzdC1wcm9qZWN0LThhZjRkIiwKICBzdG9yYWdlQnVja2V0OiAidGVzdC1wcm9qZWN0LThhZjRkLmFwcHNwb3QuY29tIiwKICBtZXNzYWdpbmdTZW5kZXJJZDogIjgyMTc4MjMyMjY5NSIsCiAgYXBwSWQ6ICIxOjgyMTc4MjMyMjY5NTp3ZWI6YmY2YzE4NGY5OGMyZGRiY2VhMTRhMiIKfSk7CnZhciBhdXRoID0gZmlyZWJhc2UuYXV0aCgpOwpleHBvcnQgZnVuY3Rpb24gdXNlQXV0aCgpIHsKICB2YXIgdXNlciA9IHJlZihudWxsKTsKICB2YXIgdW5zdWJzY3JpYmUgPSBhdXRoLm9uQXV0aFN0YXRlQ2hhbmdlZChmdW5jdGlvbiAoX3VzZXIpIHsKICAgIHJldHVybiB1c2VyLnZhbHVlID0gX3VzZXI7CiAgfSk7CiAgb25Vbm1vdW50ZWQodW5zdWJzY3JpYmUpOwogIHZhciBpc0xvZ2luID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHVzZXIudmFsdWUgIT09IG51bGw7CiAgfSk7CgogIHZhciBzaWduSW4gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBnb29nbGVQcm92aWRlcjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGdvb2dsZVByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyKCk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGF1dGguc2lnbkluV2l0aFBvcHVwKGdvb2dsZVByb3ZpZGVyKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIHNpZ25JbigpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgc2lnbk91dCA9IGZ1bmN0aW9uIHNpZ25PdXQoKSB7CiAgICByZXR1cm4gYXV0aC5zaWduT3V0KCk7CiAgfTsKCiAgcmV0dXJuIHsKICAgIHVzZXI6IHVzZXIsCiAgICBpc0xvZ2luOiBpc0xvZ2luLAogICAgc2lnbkluOiBzaWduSW4sCiAgICBzaWduT3V0OiBzaWduT3V0CiAgfTsKfQp2YXIgZmlyZXN0b3JlID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7CnZhciBtZXNzYWdlc0NvbGxlY3Rpb24gPSBmaXJlc3RvcmUuY29sbGVjdGlvbigibWVzc2FnZXMiKTsKdmFyIG1lc3NhZ2VzUXVlcnkgPSBtZXNzYWdlc0NvbGxlY3Rpb24ub3JkZXJCeSgiY3JlYXRlZEF0IiwgImRlc2MiKS5saW1pdCgxMDApOwp2YXIgZmlsdGVyID0gbmV3IEZpbHRlcigpOwpleHBvcnQgZnVuY3Rpb24gdXNlQ2hhdCgpIHsKICB2YXIgbWVzc2FnZXMgPSByZWYoW10pOwogIHZhciB1bnN1YnNjcmliZSA9IG1lc3NhZ2VzUXVlcnkub25TbmFwc2hvdChmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgIG1lc3NhZ2VzLnZhbHVlID0gc25hcHNob3QuZG9jcy5tYXAoZnVuY3Rpb24gKGRvYykgewogICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7CiAgICAgICAgaWQ6IGRvYy5pZAogICAgICB9LCBkb2MuZGF0YSgpKTsKICAgIH0pLnJldmVyc2UoKTsKICB9KTsKICBvblVubW91bnRlZCh1bnN1YnNjcmliZSk7CgogIHZhciBfdXNlQXV0aCA9IHVzZUF1dGgoKSwKICAgICAgdXNlciA9IF91c2VBdXRoLnVzZXIsCiAgICAgIGlzTG9naW4gPSBfdXNlQXV0aC5pc0xvZ2luOwoKICB2YXIgc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbiBzZW5kTWVzc2FnZSh0ZXh0KSB7CiAgICBpZiAoIWlzTG9naW4udmFsdWUpIHJldHVybjsKICAgIHZhciBfdXNlciR2YWx1ZSA9IHVzZXIudmFsdWUsCiAgICAgICAgcGhvdG9VUkwgPSBfdXNlciR2YWx1ZS5waG90b1VSTCwKICAgICAgICB1aWQgPSBfdXNlciR2YWx1ZS51aWQsCiAgICAgICAgZGlzcGxheU5hbWUgPSBfdXNlciR2YWx1ZS5kaXNwbGF5TmFtZTsKICAgIG1lc3NhZ2VzQ29sbGVjdGlvbi5hZGQoewogICAgICB1c2VyTmFtZTogZGlzcGxheU5hbWUsCiAgICAgIHVzZXJJZDogdWlkLAogICAgICB1c2VyUGhvdG9VUkw6IHBob3RvVVJMLAogICAgICB0ZXh0OiBmaWx0ZXIuY2xlYW4odGV4dCksCiAgICAgIGNyZWF0ZWRBdDogZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKCkKICAgIH0pOwogIH07CgogIHJldHVybiB7CiAgICBtZXNzYWdlczogbWVzc2FnZXMsCiAgICBzZW5kTWVzc2FnZTogc2VuZE1lc3NhZ2UKICB9Owp9"},{"version":3,"sources":["/Users/msaqib/vue-ChatProject/src/DataSource.js"],"names":["firebase","Filter","ref","onUnmounted","computed","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","useAuth","user","unsubscribe","onAuthStateChanged","_user","value","isLogin","signIn","googleProvider","GoogleAuthProvider","signInWithPopup","signOut","firestore","messagesCollection","collection","messagesQuery","orderBy","limit","filter","useChat","messages","onSnapshot","snapshot","docs","map","doc","id","data","reverse","sendMessage","text","photoURL","uid","displayName","add","userName","userId","userPhotoURL","clean","createdAt","FieldValue","serverTimestamp"],"mappings":";;;;;AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAO,oBAAP;AAEA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,GAAT,EAAcC,WAAd,EAA2BC,QAA3B,QAA2C,KAA3C;AAEAJ,QAAQ,CAACK,aAAT,CAAuB;AACrBC,EAAAA,MAAM,EAAE,yCADa;AAErBC,EAAAA,UAAU,EAAE,oCAFS;AAGrBC,EAAAA,SAAS,EAAE,oBAHU;AAIrBC,EAAAA,aAAa,EAAE,gCAJM;AAKrBC,EAAAA,iBAAiB,EAAE,cALE;AAMrBC,EAAAA,KAAK,EAAE;AANc,CAAvB;AASA,IAAMC,IAAI,GAAGZ,QAAQ,CAACY,IAAT,EAAb;AAEA,OAAO,SAASC,OAAT,GAAmB;AACxB,MAAMC,IAAI,GAAGZ,GAAG,CAAC,IAAD,CAAhB;AACA,MAAMa,WAAW,GAAGH,IAAI,CAACI,kBAAL,CAAwB,UAACC,KAAD;AAAA,WAAYH,IAAI,CAACI,KAAL,GAAaD,KAAzB;AAAA,GAAxB,CAApB;AACAd,EAAAA,WAAW,CAACY,WAAD,CAAX;AACA,MAAMI,OAAO,GAAGf,QAAQ,CAAC;AAAA,WAAMU,IAAI,CAACI,KAAL,KAAe,IAArB;AAAA,GAAD,CAAxB;;AAEA,MAAME,MAAM;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACPC,cAAAA,cADO,GACU,IAAIrB,QAAQ,CAACY,IAAT,CAAcU,kBAAlB,EADV;AAAA;AAAA,qBAEPV,IAAI,CAACW,eAAL,CAAqBF,cAArB,CAFO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAND,MAAM;AAAA;AAAA;AAAA,KAAZ;;AAIA,MAAMI,OAAO,GAAG,SAAVA,OAAU;AAAA,WAAMZ,IAAI,CAACY,OAAL,EAAN;AAAA,GAAhB;;AAEA,SAAO;AAAEV,IAAAA,IAAI,EAAJA,IAAF;AAAQK,IAAAA,OAAO,EAAPA,OAAR;AAAiBC,IAAAA,MAAM,EAANA,MAAjB;AAAyBI,IAAAA,OAAO,EAAPA;AAAzB,GAAP;AACD;AAED,IAAMC,SAAS,GAAGzB,QAAQ,CAACyB,SAAT,EAAlB;AACA,IAAMC,kBAAkB,GAAGD,SAAS,CAACE,UAAV,CAAqB,UAArB,CAA3B;AACA,IAAMC,aAAa,GAAGF,kBAAkB,CACrCG,OADmB,CACX,WADW,EACE,MADF,EAEnBC,KAFmB,CAEb,GAFa,CAAtB;AAGA,IAAMC,MAAM,GAAG,IAAI9B,MAAJ,EAAf;AAEA,OAAO,SAAS+B,OAAT,GAAmB;AACxB,MAAMC,QAAQ,GAAG/B,GAAG,CAAC,EAAD,CAApB;AACA,MAAMa,WAAW,GAAGa,aAAa,CAACM,UAAd,CAAyB,UAACC,QAAD,EAAc;AACzDF,IAAAA,QAAQ,CAACf,KAAT,GAAiBiB,QAAQ,CAACC,IAAT,CACdC,GADc,CACV,UAACC,GAAD;AAAA;AAAYC,QAAAA,EAAE,EAAED,GAAG,CAACC;AAApB,SAA2BD,GAAG,CAACE,IAAJ,EAA3B;AAAA,KADU,EAEdC,OAFc,EAAjB;AAGD,GAJmB,CAApB;AAKAtC,EAAAA,WAAW,CAACY,WAAD,CAAX;;AAEA,iBAA0BF,OAAO,EAAjC;AAAA,MAAQC,IAAR,YAAQA,IAAR;AAAA,MAAcK,OAAd,YAAcA,OAAd;;AACA,MAAMuB,WAAW,GAAG,SAAdA,WAAc,CAACC,IAAD,EAAU;AAC5B,QAAI,CAACxB,OAAO,CAACD,KAAb,EAAoB;AACpB,sBAAuCJ,IAAI,CAACI,KAA5C;AAAA,QAAQ0B,QAAR,eAAQA,QAAR;AAAA,QAAkBC,GAAlB,eAAkBA,GAAlB;AAAA,QAAuBC,WAAvB,eAAuBA,WAAvB;AACApB,IAAAA,kBAAkB,CAACqB,GAAnB,CAAuB;AACrBC,MAAAA,QAAQ,EAAEF,WADW;AAErBG,MAAAA,MAAM,EAAEJ,GAFa;AAGrBK,MAAAA,YAAY,EAAEN,QAHO;AAIrBD,MAAAA,IAAI,EAAEZ,MAAM,CAACoB,KAAP,CAAaR,IAAb,CAJe;AAKrBS,MAAAA,SAAS,EAAEpD,QAAQ,CAACyB,SAAT,CAAmB4B,UAAnB,CAA8BC,eAA9B;AALU,KAAvB;AAOD,GAVD;;AAYA,SAAO;AAAErB,IAAAA,QAAQ,EAARA,QAAF;AAAYS,IAAAA,WAAW,EAAXA;AAAZ,GAAP;AACD","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nimport Filter from \"bad-words\";\nimport { ref, onUnmounted, computed } from \"vue\";\n\nfirebase.initializeApp({\n  apiKey: \"AIzaSyB020aZUFjz1WuMvpgUUFVZZgt2RFzI1Lc\",\n  authDomain: \"test-project-8af4d.firebaseapp.com\",\n  projectId: \"test-project-8af4d\",\n  storageBucket: \"test-project-8af4d.appspot.com\",\n  messagingSenderId: \"821782322695\",\n  appId: \"1:821782322695:web:bf6c184f98c2ddbcea14a2\",\n});\n\nconst auth = firebase.auth();\n\nexport function useAuth() {\n  const user = ref(null);\n  const unsubscribe = auth.onAuthStateChanged((_user) => (user.value = _user));\n  onUnmounted(unsubscribe);\n  const isLogin = computed(() => user.value !== null);\n\n  const signIn = async () => {\n    const googleProvider = new firebase.auth.GoogleAuthProvider();\n    await auth.signInWithPopup(googleProvider);\n  };\n  const signOut = () => auth.signOut();\n\n  return { user, isLogin, signIn, signOut };\n}\n\nconst firestore = firebase.firestore();\nconst messagesCollection = firestore.collection(\"messages\");\nconst messagesQuery = messagesCollection\n  .orderBy(\"createdAt\", \"desc\")\n  .limit(100);\nconst filter = new Filter();\n\nexport function useChat() {\n  const messages = ref([]);\n  const unsubscribe = messagesQuery.onSnapshot((snapshot) => {\n    messages.value = snapshot.docs\n      .map((doc) => ({ id: doc.id, ...doc.data() }))\n      .reverse();\n  });\n  onUnmounted(unsubscribe);\n\n  const { user, isLogin } = useAuth();\n  const sendMessage = (text) => {\n    if (!isLogin.value) return;\n    const { photoURL, uid, displayName } = user.value;\n    messagesCollection.add({\n      userName: displayName,\n      userId: uid,\n      userPhotoURL: photoURL,\n      text: filter.clean(text),\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n    });\n  };\n\n  return { messages, sendMessage };\n}\n"]}]}