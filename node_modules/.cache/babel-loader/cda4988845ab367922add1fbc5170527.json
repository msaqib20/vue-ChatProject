{"remainingRequest":"/Users/msaqib/vue-ChatProject/node_modules/babel-loader/lib/index.js!/Users/msaqib/vue-ChatProject/src/firebase.js","dependencies":[{"path":"/Users/msaqib/vue-ChatProject/src/firebase.js","mtime":1626786857614},{"path":"/Users/msaqib/vue-ChatProject/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/msaqib/vue-ChatProject/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21zYXFpYi92dWUtQ2hhdFByb2plY3Qvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL21zYXFpYi92dWUtQ2hhdFByb2plY3Qvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZXZlcnNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UvYXBwIjsKaW1wb3J0ICJmaXJlYmFzZS9hdXRoIjsKaW1wb3J0ICJmaXJlYmFzZS9maXJlc3RvcmUiOwppbXBvcnQgRmlsdGVyIGZyb20gImJhZC13b3JkcyI7CmltcG9ydCB7IHJlZiwgb25Vbm1vdW50ZWQsIGNvbXB1dGVkIH0gZnJvbSAidnVlIjsKdmFyIGZpcmViYXNlQ29uZmlnID0gewogIGFwaUtleTogIkFJemFTeUJ2TV85UDRJbVdhVzBNNE9wRUlvd09CZkFOQ3dITXdnNCIsCiAgYXV0aERvbWFpbjogInZ1ZS1jaGF0LTFkY2Q1LmZpcmViYXNlYXBwLmNvbSIsCiAgZGF0YWJhc2VVUkw6ICJodHRwczovL3Z1ZS1jaGF0LTFkY2Q1LWRlZmF1bHQtcnRkYi5hc2lhLXNvdXRoZWFzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAiLAogIHByb2plY3RJZDogInZ1ZS1jaGF0LTFkY2Q1IiwKICBzdG9yYWdlQnVja2V0OiAidnVlLWNoYXQtMWRjZDUuYXBwc3BvdC5jb20iLAogIG1lc3NhZ2luZ1NlbmRlcklkOiAiMjkyOTUzMjExODA1IiwKICBhcHBJZDogIjE6MjkyOTUzMjExODA1OndlYjoyYTVhMzVhODRhN2RlNjFhMzZlNTc0Igp9Owp2YXIgYXV0aCA9IGZpcmViYXNlLmF1dGgoKTsKZXhwb3J0IGZ1bmN0aW9uIHVzZUF1dGgoKSB7CiAgdmFyIHVzZXIgPSByZWYobnVsbCk7CiAgdmFyIHVuc3Vic2NyaWJlID0gYXV0aC5vbkF1dGhTdGF0ZUNoYW5nZWQoZnVuY3Rpb24gKF91c2VyKSB7CiAgICByZXR1cm4gdXNlci52YWx1ZSA9IF91c2VyOwogIH0pOwogIG9uVW5tb3VudGVkKHVuc3Vic2NyaWJlKTsKICB2YXIgaXNMb2dpbiA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB1c2VyLnZhbHVlICE9PSBudWxsOwogIH0pOwoKICB2YXIgc2lnbkluID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgZ29vZ2xlUHJvdmlkZXI7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBnb29nbGVQcm92aWRlciA9IG5ldyBmaXJlYmFzZS5hdXRoLkdvb2dsZUF1dGhQcm92aWRlcigpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBhdXRoLnNpZ25JbldpdGhQb3B1cChnb29nbGVQcm92aWRlcik7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBzaWduSW4oKSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIHNpZ25PdXQgPSBmdW5jdGlvbiBzaWduT3V0KCkgewogICAgcmV0dXJuIGF1dGguc2lnbk91dCgpOwogIH07CgogIHJldHVybiB7CiAgICB1c2VyOiB1c2VyLAogICAgaXNMb2dpbjogaXNMb2dpbiwKICAgIHNpZ25Jbjogc2lnbkluLAogICAgc2lnbk91dDogc2lnbk91dAogIH07Cn0KdmFyIGZpcmVzdG9yZSA9IGZpcmViYXNlLmZpcmVzdG9yZSgpOwp2YXIgbWVzc2FnZXNDb2xsZWN0aW9uID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oIm1lc3NhZ2VzIik7CnZhciBtZXNzYWdlc1F1ZXJ5ID0gbWVzc2FnZXNDb2xsZWN0aW9uLm9yZGVyQnkoImNyZWF0ZWRBdCIsICJkZXNjIikubGltaXQoMTAwKTsKdmFyIGZpbHRlciA9IG5ldyBGaWx0ZXIoKTsKZXhwb3J0IGZ1bmN0aW9uIHVzZUNoYXQoKSB7CiAgdmFyIG1lc3NhZ2VzID0gcmVmKFtdKTsKICB2YXIgdW5zdWJzY3JpYmUgPSBtZXNzYWdlc1F1ZXJ5Lm9uU25hcHNob3QoZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICBtZXNzYWdlcy52YWx1ZSA9IHNuYXBzaG90LmRvY3MubWFwKGZ1bmN0aW9uIChkb2MpIHsKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoewogICAgICAgIGlkOiBkb2MuaWQKICAgICAgfSwgZG9jLmRhdGEoKSk7CiAgICB9KS5yZXZlcnNlKCk7CiAgfSk7CiAgb25Vbm1vdW50ZWQodW5zdWJzY3JpYmUpOwoKICB2YXIgX3VzZUF1dGggPSB1c2VBdXRoKCksCiAgICAgIHVzZXIgPSBfdXNlQXV0aC51c2VyLAogICAgICBpc0xvZ2luID0gX3VzZUF1dGguaXNMb2dpbjsKCiAgdmFyIHNlbmRNZXNzYWdlID0gZnVuY3Rpb24gc2VuZE1lc3NhZ2UodGV4dCkgewogICAgaWYgKCFpc0xvZ2luLnZhbHVlKSByZXR1cm47CiAgICB2YXIgX3VzZXIkdmFsdWUgPSB1c2VyLnZhbHVlLAogICAgICAgIHBob3RvVVJMID0gX3VzZXIkdmFsdWUucGhvdG9VUkwsCiAgICAgICAgdWlkID0gX3VzZXIkdmFsdWUudWlkLAogICAgICAgIGRpc3BsYXlOYW1lID0gX3VzZXIkdmFsdWUuZGlzcGxheU5hbWU7CiAgICBtZXNzYWdlc0NvbGxlY3Rpb24uYWRkKHsKICAgICAgdXNlck5hbWU6IGRpc3BsYXlOYW1lLAogICAgICB1c2VySWQ6IHVpZCwKICAgICAgdXNlclBob3RvVVJMOiBwaG90b1VSTCwKICAgICAgdGV4dDogZmlsdGVyLmNsZWFuKHRleHQpLAogICAgICBjcmVhdGVkQXQ6IGZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpCiAgICB9KTsKICB9OwoKICByZXR1cm4gewogICAgbWVzc2FnZXM6IG1lc3NhZ2VzLAogICAgc2VuZE1lc3NhZ2U6IHNlbmRNZXNzYWdlCiAgfTsKfQ=="},{"version":3,"sources":["/Users/msaqib/vue-ChatProject/src/firebase.js"],"names":["firebase","Filter","ref","onUnmounted","computed","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","useAuth","user","unsubscribe","onAuthStateChanged","_user","value","isLogin","signIn","googleProvider","GoogleAuthProvider","signInWithPopup","signOut","firestore","messagesCollection","collection","messagesQuery","orderBy","limit","filter","useChat","messages","onSnapshot","snapshot","docs","map","doc","id","data","reverse","sendMessage","text","photoURL","uid","displayName","add","userName","userId","userPhotoURL","clean","createdAt","FieldValue","serverTimestamp"],"mappings":"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","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nimport Filter from \"bad-words\";\nimport { ref, onUnmounted, computed } from \"vue\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBvM_9P4ImWaW0M4OpEIowOBfANCwHMwg4\",\n  authDomain: \"vue-chat-1dcd5.firebaseapp.com\",\n  databaseURL:\n    \"https://vue-chat-1dcd5-default-rtdb.asia-southeast1.firebasedatabase.app\",\n  projectId: \"vue-chat-1dcd5\",\n  storageBucket: \"vue-chat-1dcd5.appspot.com\",\n  messagingSenderId: \"292953211805\",\n  appId: \"1:292953211805:web:2a5a35a84a7de61a36e574\",\n};\n\nconst auth = firebase.auth();\n\nexport function useAuth() {\n  const user = ref(null);\n  const unsubscribe = auth.onAuthStateChanged((_user) => (user.value = _user));\n  onUnmounted(unsubscribe);\n  const isLogin = computed(() => user.value !== null);\n\n  const signIn = async () => {\n    const googleProvider = new firebase.auth.GoogleAuthProvider();\n    await auth.signInWithPopup(googleProvider);\n  };\n  const signOut = () => auth.signOut();\n\n  return { user, isLogin, signIn, signOut };\n}\n\nconst firestore = firebase.firestore();\nconst messagesCollection = firestore.collection(\"messages\");\nconst messagesQuery = messagesCollection\n  .orderBy(\"createdAt\", \"desc\")\n  .limit(100);\nconst filter = new Filter();\n\nexport function useChat() {\n  const messages = ref([]);\n  const unsubscribe = messagesQuery.onSnapshot((snapshot) => {\n    messages.value = snapshot.docs\n      .map((doc) => ({ id: doc.id, ...doc.data() }))\n      .reverse();\n  });\n  onUnmounted(unsubscribe);\n\n  const { user, isLogin } = useAuth();\n  const sendMessage = (text) => {\n    if (!isLogin.value) return;\n    const { photoURL, uid, displayName } = user.value;\n    messagesCollection.add({\n      userName: displayName,\n      userId: uid,\n      userPhotoURL: photoURL,\n      text: filter.clean(text),\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n    });\n  };\n\n  return { messages, sendMessage };\n}\n"]}]}